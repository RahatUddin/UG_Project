<!DOCTYPE html>
<html>
     <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Real-Time Sound Synthesis</title>
        <meta name="description" content="Creating SFX in real time">
        <link rel="stylesheet" href="main.css">
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="webpd-latest.js"></script>
		<!------------------Range Slider--------------->
		<link rel="stylesheet" href="slider_css.css">
		<!--------------------------------------------->
		<script type="text/javascript">
			var patch;
			function PlayStopPd(){
				if (window.patch != null){
					document.getElementById("PlayStop").innerHTML = "Start Sound Board";
					Pd.destroyPatch(window.patch)
					window.patch = null;
				}
				else{
					$.get('Pedestrian_Crossing.pd', function(patchStr) {
					window.patch = Pd.loadPatch(patchStr)
					Pd.send('Metro', [parseFloat(document.getElementById('Metro').value)])
					Pd.send('Osc', [parseFloat(document.getElementById('Osc').value)])
					Pd.send('Amp', [parseFloat(document.getElementById('Amp').value)])
					Pd.start()
					document.getElementById("PlayStop").innerHTML = "Stop Sound Board";
					})
				}		
			}
			
			function Reset(){
				if (window.patch != null){
					Pd.send('Metro', [130])
					Pd.send('Osc', [2800])
					Pd.send('Amp', [0.2])
					
					document.getElementById('Metro').value = 130;
					document.getElementById('tempoText').innerHTML = "130";
					document.getElementById('Osc').value = 2800;
					document.getElementById('pitchText').innerHTML = "2800";
					document.getElementById('Amp').value = 0.2;
					document.getElementById('ampText').innerHTML = "0.2";
				}
			}
			
			function changeTempo(){
				Pd.send('Metro', [parseFloat(document.getElementById('Metro').value)])
			}
			
			function changePitch(){
				Pd.send('Osc', [parseFloat(document.getElementById('Osc').value)])
			}
			
			function changeAmp(){
				Pd.send('Amp', [parseFloat(document.getElementById('Amp').value)])
			}
			function truckReverse(){
				if (window.patch != null){
					Pd.send('Metro', [500])
					Pd.send('Osc', [1100])
					Pd.send('Amp', [0.2])
					
					document.getElementById('Metro').value = 500;
					document.getElementById('tempoText').innerHTML = "500";
					document.getElementById('Osc').value = 1100;
					document.getElementById('pitchText').innerHTML = "1100";
					document.getElementById('Amp').value = 0.2;
					document.getElementById('ampText').innerHTML = "0.2";
				}
				
			}
		</script>
    </head>
    <body>
		<div id="Header">
        	<h1 id="PageHeader"><center>Real-Time Sound Synthesis</center></h1>
		<h2 id="SubHeader"><center>[ Pedestrian Crossing ]</center></h2>
		</div>
		<div id="container">
			<div id="left-panel">
				<h3 id="containerLabel">{ Sound Board }</h3>
				<button id="PlayStop" class="button" onClick="PlayStopPd()">Start Sound Board</button>
				<button id="Reset" class="button" onClick="Reset()">Reset Sound Board</button>
				<div class="range-slider"><!--Tempo-->
					<p>Tempo:- </p>
					<input id="Metro" class="range-slider__range" type="range" value="130" min="0" max="500" oninput="changeTempo()">
					<span id="tempoText" class="range-slider__value">0</span>
				</div>
				<div class="range-slider"><!--Pitch-->
					<p>Pitch:- </p>
					<input id="Osc" class="range-slider__range" type="range" value="2800" min="0" max="5000" oninput="changePitch()">
					<span id="pitchText" class="range-slider__value">0</span>
				</div>
				<div class="range-slider"><!--Amplitude-->
					<p>Amplitude:- </p>
					<input id="Amp" class="range-slider__range" type="range" value="0.2" min="0" max="1" step="0.01" oninput="changeAmp()">
					<span  id="ampText" class="range-slider__value">0</span>
				</div>
				<script src="slider_js.js"></script>
				<div id="Presets">
					<h3 id="containerLabel">{ Presets }</h3>
					<button id="TruckReverse" class="button" onClick="truckReverse()">Truck Reversing</button>
				</div>
			</div>
			<div id="right-panel">
			<h3 id="containerLabel">{Right Panel}</h3>
			</div>
		</div>
    </body>
</html>
