<!DOCTYPE html>
<html>
     <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Real-Time Sound Synthesis</title>
        <meta name="description" content="Creating SFX in real time">
        <link rel="stylesheet" href="main.css">
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="webpd-latest.js"></script>
		<link rel="stylesheet" href="slider_css.css">
		<script type="text/javascript">
			var patch;
			function PlayStopPd(){
				if (window.patch != null){
					document.getElementById("PlayStop").innerHTML = "Play Pedestrian Crossing SFX";
					Pd.destroyPatch(window.patch)
					window.patch = null;
				}
				else{
					$.get('Pedestrian_Crossing.pd', function(patchStr) {
					window.patch = Pd.loadPatch(patchStr)
					Pd.send('Metro', 130)
					Pd.send('Osc', 2800)
					Pd.send('Amp', 0.2)
					Pd.start()
					document.getElementById("PlayStop").innerHTML = "Stop Pedestrian Crossing SFX";
					})
				}		
			}
		</script>

		<script type="text/javascript">
			function PlayStopPD_2(){
				var patch = Pd.createPatch()
					, tgl = patch.createObject('tgl', [1])
					, metro = patch.createObject('metro', [130])
					, f = patch.createObject('f', [0])
					, plus = patch.createObject('+', [1])
					, mod = patch.createObject('mod', [2])
					, sig = patch.createObject('sig~')
					, osc = patch.createObject('osc~', [2800])
					, multiplier = patch.createObject('*~')
					, amplitude = patch.createObject('*~', [0.2])
					, dac = patch.createObject('dac~')
				tgl.o(0).connect(metro.i(0))
				metro.o(0).connect(f.i(0)) 				//Connect left outlet of [metro] to left inlet of [f]
				f.o(0).connect(plus.i(0))  				//Connect left outlet of [f] to left inlet of [+ 1]
				plus.o(0).connect(f.i(1))  				//Connect left outlet of [+ 1] to right inlet of [f]
				f.o(0).connect(mod.i(0))   				//Connect left outlet of [f] to left inlet of [mod 2]
				mod.o(0).connect(sig.i(0)) 				//Connect left outlet of [mod 2] to left inlet of [sig~]
				sig.o(0).connect(multiplier.i(0))		//Connect left outlet of [sig~] to left inlet of [*~]
				osc.o(0).connect(multiplier.i(1))		//Connect left outlet of [ocs~] to right inlet of [*~]
				multiplier.o(0).connect(amplitude.i(0))	//Connect left outlet of [*~] to left inlet of [*~ (amp)]
				amplitude.o(0).connect(dac.i(0))		//Connect left outlet of [*~(amp)] to left inlet of [dac~]
				amplitude.o(0).connect(dac.i(1))		//Connect left outlet of [*~(amp)] to right inlet of [dac~]

			}
		</script>
    </head>
    <body>
		<div id="Header">
        <h1 id="PageHeader"><center>Real-Time Sound Synthesis<center></h1>
		<h2 id="SubHeader"><center>[ Pedestrian Crossing ]</center></h2>
		</div>
		
		<div id="container">
			<div id="left-panel">
				<h3 id="tempLabel">{Left Panel}</h3>
				<button id="PlayStop" class="button" onClick="PlayStopPd()">Play Pedestrian Crossing SFX
					<p>---Streamed from server---</p>
				</button>
				<button id="PlayStop_2" class="button" onClick="PlayStopPD_2()">Play Pedestrian Crossing SFX
					<p>---Embedded into page---</p>
				</button>
				<div class="range-slider"><!--Tempo-->
					<p>Tempo:- </p>
					<input class="range-slider__range" type="range" value="130" min="0" max="500">
					<span class="range-slider__value">0</span>
				</div>
				<div class="range-slider"><!--Pitch-->
					<p>Pitch:- </p>
					<input class="range-slider__range" type="range" value="2800" min="0" max="5000">
					<span class="range-slider__value">0</span>
				</div>
				<div class="range-slider"><!--Amplitude-->
					<p>Amplitude:- </p>
					<input class="range-slider__range" type="range" value="0.2" min="0" max="1" step="0.01">
					<span class="range-slider__value">0</span>
				</div>
				<script src="slider_js.js"></script>
			</div>
			<div id="right-panel">
			<h3 id="tempLabel">{Right Panel}</h3>
			</div>
		</div>
    </body>
</html>
